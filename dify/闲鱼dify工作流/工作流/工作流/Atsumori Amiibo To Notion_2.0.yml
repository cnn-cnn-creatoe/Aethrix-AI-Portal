app:
  description: 'ã‚ã¤ã¾ã‚Œã©ã†ã¶ã¤ã®æ£®ã®amiiboã®ç”»åƒã‹ã‚‰ç•ªå·ã€ã‚­ãƒ£ãƒ©åã€ä½æ°‘ã®å¯å¦ã€æ€§æ ¼ã€å£ç™–ã€URLã€å€¤æ®µã‚’å–å¾—ãƒ»ãƒãƒƒãƒˆæ¤œç´¢ã—ã€Notionã«ç™»éŒ²ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã™ã€‚Notionã§ä¸Šè¨˜ã®åˆ—åã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã€Notionã®Connectionsã‚’æ¥ç¶šã®ä¸Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹idã¨Connectionsã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç’°å¢ƒå¤‰æ•°ã«è¨­å®šã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚ï¼ˆOpenAIã¨Tavily
    Searchã®APIç™»éŒ²ã‚‚å¿…è¦ã§ã™ã€‚ï¼‰

    â€»ç²¾åº¦ã¯ã„ã¾ã„ã¡ã§ã™ã€‚å®Œå…¨ã«ãƒ•ãƒ­ãƒ¼ãŒæ­¢ã¾ã‚‹ã®ã¯10ï¼…æœªæº€ã§ã™ãŒã€æƒ…å ±åé›†ãŒã†ã¾ãã„ãã¾ã›ã‚“ã€‚æ¤œç´¢èªã®æƒ…å ±æŠ½å‡ºã¯4o-miniã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒã€4oã«ã™ã‚‹ã¨ç²¾åº¦ãŒä¸ŠãŒã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚'
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: Atsumori Amiibo To Notion
  use_icon_as_answer_icon: false
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 672197d7-646f-49ed-891d-4fc14843aee3
    name: database_id
    selector:
    - env
    - database_id
    value: your_database_id
    value_type: secret
  - description: ''
    id: 0664e086-164b-44c7-99a0-53737cd8ccce
    name: NOTION_API_KEY
    selector:
    - env
    - NOTION_API_KEY
    value: your_notion_api_key
    value_type: secret
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: llm
      id: 1733224980318-source-1733225047174-target
      selected: false
      source: '1733224980318'
      sourceHandle: source
      target: '1733225047174'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: tool
      id: 1733225047174-source-1733297682340-target
      source: '1733225047174'
      sourceHandle: source
      target: '1733297682340'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: tool
      id: 1733225047174-source-17332979680750-target
      source: '1733225047174'
      sourceHandle: source
      target: '17332979680750'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 1733297682340-source-1733298019322-target
      source: '1733297682340'
      sourceHandle: source
      target: '1733298019322'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 17332979680750-source-1733298019322-target
      source: '17332979680750'
      sourceHandle: source
      target: '1733298019322'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1733298019322-source-1733307178804-target
      source: '1733298019322'
      sourceHandle: source
      target: '1733307178804'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: http-request
      id: 1733307178804-source-1733306849920-target
      source: '1733307178804'
      sourceHandle: source
      target: '1733306849920'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: end
      id: 1733307178804-source-1733253004409-target
      source: '1733307178804'
      sourceHandle: source
      target: '1733253004409'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: tool
      id: 1733225047174-source-17350019813120-target
      source: '1733225047174'
      sourceHandle: source
      target: '17350019813120'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: tool
        targetType: llm
      id: 17350019813120-source-1733298019322-target
      source: '17350019813120'
      sourceHandle: source
      target: '1733298019322'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: amiboã‚«ãƒ¼ãƒ‰ã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
          max_length: 48
          options: []
          required: true
          type: file
          variable: amiibo
      height: 89
      id: '1733224980318'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: 22ea94ec-d8ac-4634-ab3b-50723d30e79a
          role: system
          text: '{{#1733224980318.amiibo.name#}}ã‹ã‚‰ç•ªå·ã¨ã‚­ãƒ£ãƒ©åã‚’èª­ã¿å–ã£ã¦ã€‚

            å‡ºåŠ›

            ç•ªå·ï¼š

            ã‚­ãƒ£ãƒ©åï¼š'
        selected: false
        title: LLM_æ¤œç´¢ã‚¯ã‚¨ãƒªç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - '1733224980318'
            - amiibo
          enabled: true
      height: 97
      id: '1733225047174'
      position:
        x: 382
        y: 282
      positionAbsolute:
        x: 382
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1733298019322'
          - text
          variable: text
        selected: false
        title: çµ‚äº†
        type: end
      height: 89
      id: '1733253004409'
      position:
        x: 1679.1982421871098
        y: 420.54833063115393
      positionAbsolute:
        x: 1679.1982421871098
        y: 420.54833063115393
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        provider_id: tavily
        provider_name: tavily
        provider_type: builtin
        selected: true
        title: TavilySearch_ä½æ°‘
        tool_configurations:
          days: 3
          exclude_domains: null
          include_answer: 0
          include_domains: null
          include_image_descriptions: 0
          include_images: 0
          include_raw_content: 0
          max_results: 3
          search_depth: advanced
          topic: general
        tool_label: Tavily Search
        tool_name: tavily_search
        tool_parameters:
          query:
            type: mixed
            value: ã‚ã¤ã¾ã‚Œã©ã†ã¶ã¤ã®æ£®ã®{{#1733225047174.text#}}ã¯ã€ä½æ°‘ã«ãªã‚Œã‚‹ï¼Ÿ
        type: tool
      height: 323
      id: '1733297682340'
      position:
        x: 686
        y: 282
      positionAbsolute:
        x: 686
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        provider_id: tavily
        provider_name: tavily
        provider_type: builtin
        selected: false
        title: TavilySearch_æ€§æ ¼ã¨å£ç™–
        tool_configurations:
          days: 3
          exclude_domains: null
          include_answer: 0
          include_domains: null
          include_image_descriptions: 0
          include_images: 0
          include_raw_content: 0
          max_results: 3
          search_depth: advanced
          topic: general
        tool_label: Tavily Search
        tool_name: tavily_search
        tool_parameters:
          query:
            type: mixed
            value: ã‚ã¤ã¾ã‚Œã©ã†ã¶ã¤ã®æ£®ã®{{#1733225047174.text#}}ã®æ€§æ ¼ã¨å£ç™–ã¯ï¼Ÿ
        type: tool
      height: 323
      id: '17332979680750'
      position:
        x: 686
        y: 630.6465734331522
      positionAbsolute:
        x: 686
        y: 630.6465734331522
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gpt-4o-mini
          provider: openai
        prompt_template:
        - id: d3229cc6-e534-4f22-a211-ff6caa4d6c32
          role: system
          text: "{{#1733225047174.text#}}ã«ã¤ã„ã¦ã€\n{{#1733297682340.text#}}ã¨{{#17332979680750.text#}}ã¨{{#17350019813120.text#}}ã®æƒ…å ±ã‹ã‚‰ã€ä»¥ä¸‹ã®é …ç›®ã‚’æŠœãå‡ºã—ã¦XMLå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚\n\
            \n### æŠœãå‡ºã™æƒ…å ±:\n1. **ä½æ°‘ã®å¯å¦**: ã€Œå¯ã€ã¾ãŸã¯ã€Œå¦ã€ã¨ã—ã¦å›ç­”ã€‚\n2. **æ€§æ ¼ï¼ˆä½•ç³»ã‹ï¼‰**: ä½æ°‘ãŒã€Œå¯ã€ã®å ´åˆã®ã¿å›ç­”ã€‚ä½æ°‘ä¸å¯ã®å ´åˆã¯ç©ºæ¬„ã¨ã™ã‚‹ã€‚\n\
            3. **å£ãã›**: ä½æ°‘ãŒã€Œå¯ã€ã®å ´åˆã®ã¿å›ç­”ã€‚ä½æ°‘ä¸å¯ã®å ´åˆã¯ç©ºæ¬„ã¨ã™ã‚‹ã€‚\n4. **æƒ…å ±æºã®URL**: ä¸Šè¨˜ã®æƒ…å ±æºã€‚ç¢ºå®Ÿã«è¨˜è¼‰ã€‚\n\
            5. **amiiboã®å€¤æ®µ**: \n\n### å‡ºåŠ›å½¢å¼\nä»¥ä¸‹ã®å½¢å¼ã«å³å¯†ã«å¾“ã£ã¦å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚å‡ºåŠ›å½¢å¼ã®è¡¨ç¤ºãªã©ã€ä½™è¨ˆãªæƒ…å ±ã‚„èª¬æ˜ã‚’å«ã‚ãªã„ã§ãã ã•ã„ã€‚\n\
            \n<characterData>\n    <no>ç•ªå·</no>\n    <character>ã‚­ãƒ£ãƒ©å</character>\n\
            \    <resident>ä½æ°‘ã®å¯å¦</resident>\n    <personality>æ€§æ ¼ï¼ˆä½æ°‘ä¸å¯ã®å ´åˆã¯ç©ºæ¬„ï¼‰</personality>\n\
            \    <saying>å£ãã›ï¼ˆä½æ°‘ä¸å¯ã®å ´åˆã¯ç©ºæ¬„ï¼‰</saying>\n    <url>æƒ…å ±æºã®URL</url>\n    <price>amiiboå€¤æ®µ</price>\n\
            </characterData>\n"
        selected: false
        title: LLM_æ¤œç´¢çµæœæ•´ç†
        type: llm
        variables: []
        vision:
          enabled: false
      height: 97
      id: '1733298019322'
      position:
        x: 1076.1982421871098
        y: 282
      positionAbsolute:
        x: 1076.1982421871098
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        authorization:
          config:
            api_key: '{{#env.NOTION_API_KEY#}}'
            type: bearer
          type: api-key
        body:
          data:
          - id: key-value-431
            key: ''
            type: text
            value: "{\n  \"parent\": { \"database_id\": \"{{#env.database_id#}}\"\
              \ },\n  \"properties\": {\n    \"ç•ªå·\": {\n      \"title\": [\n     \
              \   {\n          \"text\": {\n            \"content\": \"{{#1733307178804.no#}}\"\
              \n          }\n        }\n      ]\n    },\n    \"ã‚­ãƒ£ãƒ©å\": {\n      \"\
              rich_text\": [\n        {\n          \"text\": {\n            \"content\"\
              : \"{{#1733307178804.character#}}\"\n          }\n        }\n      ]\n\
              \    },\n    \"ä½æ°‘ã®å¯å¦\": {\n      \"rich_text\": [\n        {\n     \
              \     \"text\": {\n            \"content\": \"{{#1733307178804.resident#}}\"\
              \n          }\n        }\n      ]\n    },\n    \"æ€§æ ¼\": {\n      \"rich_text\"\
              : [\n        {\n          \"text\": {\n            \"content\": \"{{#1733307178804.personality#}}\"\
              \n          }\n        }\n      ]\n    },\n    \"å£ç™–\": {\n      \"rich_text\"\
              : [\n        {\n          \"text\": {\n            \"content\": \"{{#1733307178804.saying#}}\"\
              \n          }\n        }\n      ]\n    },\n    \"URL\": {\n      \"\
              url\": \"{{#1733307178804.url#}}\"\n    },\n    \"å€¤æ®µ\": {\n      \"\
              rich_text\": [\n        {\n          \"text\": {\n            \"content\"\
              : \"{{#1733307178804.price#}}\"\n          }\n        }\n      ]\n \
              \   }\n  }\n}\n"
          type: json
        desc: ''
        headers: 'Content-Type:application/json

          Notion-Version:2022-06-28'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        type: http-request
        url: https://api.notion.com/v1/pages
        variables: []
      height: 134
      id: '1733306849920'
      position:
        x: 1679.1982421871098
        y: 282
      positionAbsolute:
        x: 1679.1982421871098
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        code: "import xml.etree.ElementTree as ET\n\ndef main(xml_input):\n    try:\n\
          \        # XMLãƒ‡ãƒ¼ã‚¿ã‚’ãƒ‘ãƒ¼ã‚¹\n        root = ET.fromstring(xml_input.strip())\n\
          \n        # å„è¦ç´ ã‚’æŠ½å‡º\n        data = {\n            \"no\": root.find(\"no\"\
          ).text if root.find(\"no\") is not None else \"\",\n            \"character\"\
          : root.find(\"character\").text if root.find(\"character\") is not None\
          \ else \"\",\n            \"resident\": root.find(\"resident\").text if\
          \ root.find(\"resident\") is not None else \"\",\n            \"personality\"\
          : root.find(\"personality\").text if root.find(\"personality\") is not None\
          \ else \"\",\n            \"saying\": root.find(\"saying\").text if root.find(\"\
          saying\") is not None else \"\",\n            \"url\": root.find(\"url\"\
          ).text if root.find(\"url\") is not None else \"\",\n            \"price\"\
          : root.find(\"price\").text if root.find(\"price\") is not None else \"\"\
          \n        }\n\n        # å¤‰æ•°ã¨ã—ã¦è¿”ã™\n        return {\n            \"no\":\
          \ data[\"no\"],\n            \"character\": data[\"character\"],\n     \
          \       \"resident\": data[\"resident\"],\n            \"personality\":\
          \ data[\"personality\"],\n            \"saying\": data[\"saying\"],\n  \
          \          \"url\": data[\"url\"],\n            \"price\": data[\"price\"\
          ]\n        }\n\n    except ET.ParseError as e:\n        # ã‚¨ãƒ©ãƒ¼å‡¦ç†\n      \
          \  return {\"error\": f\"XMLãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼: {str(e)}\"}\n"
        code_language: python3
        desc: ''
        outputs:
          character:
            children: null
            type: string
          'no':
            children: null
            type: string
          personality:
            children: null
            type: string
          price:
            children: null
            type: string
          resident:
            children: null
            type: string
          saying:
            children: null
            type: string
          url:
            children: null
            type: string
        selected: false
        title: ã‚³ãƒ¼ãƒ‰
        type: code
        variables:
        - value_selector:
          - '1733298019322'
          - text
          variable: xml_input
      height: 53
      id: '1733307178804'
      position:
        x: 1379.1982421871098
        y: 282
      positionAbsolute:
        x: 1379.1982421871098
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        provider_id: tavily
        provider_name: tavily
        provider_type: builtin
        selected: false
        title: TavilySearch_å€¤æ®µ
        tool_configurations:
          days: 3
          exclude_domains: null
          include_answer: 0
          include_domains: null
          include_image_descriptions: 0
          include_images: 0
          include_raw_content: 0
          max_results: 3
          search_depth: advanced
          topic: general
        tool_label: Tavily Search
        tool_name: tavily_search
        tool_parameters:
          query:
            type: mixed
            value: ã‚ã¤ã¾ã‚Œã©ã†ã¶ã¤ã®æ£® amiibo {{#1733225047174.text#}} å€¤æ®µ
        type: tool
      height: 323
      id: '17350019813120'
      position:
        x: 686
        y: 978.5910096442506
      positionAbsolute:
        x: 686
        y: 978.5910096442506
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    viewport:
      x: -64.05300762620755
      y: -1.3196586244506534
      zoom: 0.7578582832552002
