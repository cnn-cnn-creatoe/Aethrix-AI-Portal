<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API æµ‹è¯• - AI Skill</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #0A0C1E;
            color: #F5F5F5;
        }
        h1 {
            color: #FF69B4;
        }
        .test-section {
            background: #0F1228;
            border: 2px solid #FF69B4;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .test-section h2 {
            color: #00FFFF;
            margin-top: 0;
        }
        button {
            background: #FF69B4;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }
        button:hover {
            background: #00FFFF;
        }
        pre {
            background: #050614;
            border: 1px solid #00FFFF;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            font-size: 12px;
        }
        .skill-card {
            background: linear-gradient(135deg, #0A0C1E, #0F1228);
            border: 2px solid #FF69B4;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .skill-card h3 {
            color: #FF69B4;
            margin-top: 0;
        }
        .skill-card p {
            color: #EAEAEA;
        }
        .badge {
            display: inline-block;
            background: #9400D3;
            color: #FFF;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            margin-right: 5px;
        }
        .status {
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
            font-weight: bold;
        }
        .status.success {
            background: #39FF14;
            color: #000;
        }
        .status.error {
            background: #FF0000;
            color: #FFF;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª AI Skill API æµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>1. å¥åº·æ£€æŸ¥</h2>
        <button onclick="testHealth()">æµ‹è¯• /api/health</button>
        <div id="health-result"></div>
    </div>
    
    <div class="test-section">
        <h2>2. è·å–åˆ†ç±»</h2>
        <button onclick="testCategories()">æµ‹è¯• /api/categories</button>
        <div id="categories-result"></div>
    </div>
    
    <div class="test-section">
        <h2>3. è·å–å¹³å°</h2>
        <button onclick="testPlatforms()">æµ‹è¯• /api/platforms</button>
        <div id="platforms-result"></div>
    </div>
    
    <div class="test-section">
        <h2>4. è·å– Skills åˆ—è¡¨</h2>
        <button onclick="testSkills()">æµ‹è¯• /api/skills (å‰5ä¸ª)</button>
        <button onclick="testSkillsAll()">è·å–æ‰€æœ‰ Skills</button>
        <div id="skills-result"></div>
    </div>
    
    <div class="test-section">
        <h2>5. Skills å¡ç‰‡é¢„è§ˆ</h2>
        <div id="skills-preview"></div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:4005/api';

        async function testHealth() {
            const resultDiv = document.getElementById('health-result');
            resultDiv.innerHTML = '<p>â³ åŠ è½½ä¸­...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/health`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <p><span class="status success">âœ… æˆåŠŸ</span></p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `<p><span class="status error">âŒ å¤±è´¥</span></p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><span class="status error">âŒ é”™è¯¯</span></p>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testCategories() {
            const resultDiv = document.getElementById('categories-result');
            resultDiv.innerHTML = '<p>â³ åŠ è½½ä¸­...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/categories`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <p><span class="status success">âœ… æˆåŠŸ</span> - å…± ${data.data.categories.length} ä¸ªåˆ†ç±»</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `<p><span class="status error">âŒ å¤±è´¥</span></p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><span class="status error">âŒ é”™è¯¯</span></p>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testPlatforms() {
            const resultDiv = document.getElementById('platforms-result');
            resultDiv.innerHTML = '<p>â³ åŠ è½½ä¸­...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/platforms`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <p><span class="status success">âœ… æˆåŠŸ</span> - å…± ${data.data.platforms.length} ä¸ªå¹³å°</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } else {
                    resultDiv.innerHTML = `<p><span class="status error">âŒ å¤±è´¥</span></p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><span class="status error">âŒ é”™è¯¯</span></p>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testSkills() {
            const resultDiv = document.getElementById('skills-result');
            resultDiv.innerHTML = '<p>â³ åŠ è½½ä¸­...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/skills?page=1&per_page=5`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <p><span class="status success">âœ… æˆåŠŸ</span> - å…± ${data.data.pagination.total} ä¸ª Skillsï¼Œæ˜¾ç¤ºå‰ 5 ä¸ª</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                    
                    // æ˜¾ç¤ºå¡ç‰‡é¢„è§ˆ
                    renderSkillCards(data.data.skills);
                } else {
                    resultDiv.innerHTML = `<p><span class="status error">âŒ å¤±è´¥</span></p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><span class="status error">âŒ é”™è¯¯</span></p>
                    <pre>${error.message}</pre>
                `;
            }
        }

        async function testSkillsAll() {
            const resultDiv = document.getElementById('skills-result');
            resultDiv.innerHTML = '<p>â³ åŠ è½½ä¸­...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/skills?page=1&per_page=100`);
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <p><span class="status success">âœ… æˆåŠŸ</span> - å…± ${data.data.pagination.total} ä¸ª Skills</p>
                        <p>Skills åˆ—è¡¨ï¼š</p>
                        <ul>
                            ${data.data.skills.map(s => `<li>${s.name} (${s.category})</li>`).join('')}
                        </ul>
                    `;
                    
                    // æ˜¾ç¤ºå¡ç‰‡é¢„è§ˆ
                    renderSkillCards(data.data.skills.slice(0, 10));
                } else {
                    resultDiv.innerHTML = `<p><span class="status error">âŒ å¤±è´¥</span></p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <p><span class="status error">âŒ é”™è¯¯</span></p>
                    <pre>${error.message}</pre>
                `;
            }
        }

        function renderSkillCards(skills) {
            const previewDiv = document.getElementById('skills-preview');
            
            if (!skills || skills.length === 0) {
                previewDiv.innerHTML = '<p>æ²¡æœ‰ Skills æ•°æ®</p>';
                return;
            }
            
            previewDiv.innerHTML = `
                <h3>ğŸ“¦ Skills å¡ç‰‡é¢„è§ˆï¼ˆå‰ ${skills.length} ä¸ªï¼‰</h3>
                ${skills.map(skill => `
                    <div class="skill-card">
                        <h3>${skill.icon || 'ğŸ“¦'} ${skill.name}</h3>
                        <p>${skill.description}</p>
                        <div>
                            <span class="badge">${skill.category}</span>
                            ${skill.featured ? '<span class="badge">â­ Featured</span>' : ''}
                            ${skill.popular ? '<span class="badge">ğŸ”¥ Popular</span>' : ''}
                        </div>
                        <p style="margin-top: 10px; font-size: 12px; color: #B0B0B0;">
                            ğŸ’» å¹³å°: ${skill.platforms.join(', ')}<br>
                            ğŸ·ï¸ æ ‡ç­¾: ${skill.tags.join(', ')}<br>
                            â­ Stars: ${skill.stats.stars} | ğŸ“¥ Downloads: ${skill.stats.downloads}
                        </p>
                    </div>
                `).join('')}
            `;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            console.log('ğŸ§ª API æµ‹è¯•é¡µé¢å·²åŠ è½½');
            testHealth();
        });
    </script>
</body>
</html>
