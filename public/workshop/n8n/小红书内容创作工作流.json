{
  "name": "å°çº¢ä¹¦æ–‡æ¡ˆç´ æå·¥ä½œæµ copy",
  "nodes": [
    {
      "parameters": {
        "formTitle": "å°çº¢ä¹¦å†…å®¹ç”Ÿæˆå™¨",
        "formDescription": "æ ¹æ®æŒ‡å®šçš„ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå°çº¢ä¹¦é£æ ¼ç´ æï¼Œå«ï¼šæ–‡æ¡ˆã€é…å›¾/è§†é¢‘ç­‰",
        "formFields": {
          "values": [
            {
              "fieldLabel": "å†…å®¹æ¥æº",
              "fieldType": "textarea",
              "placeholder": "è¾“å…¥æ–‡æ¡ˆä¸»é¢˜/æ–‡æ¡ˆå†…å®¹/urlé“¾æ¥",
              "requiredField": true
            },
            {
              "fieldLabel": "æ–‡æ¡ˆé£æ ¼",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "é€šç”¨é£æ ¼"
                  },
                  {
                    "option": "å¥³æ€§æˆé•¿"
                  },
                  {
                    "option": "ç¾é£Ÿæ¢åº—"
                  },
                  {
                    "option": "æ¯å©´"
                  },
                  {
                    "option": "å¥½ç‰©æ¨è"
                  },
                  {
                    "option": "å®¶å±…"
                  },
                  {
                    "option": "æˆ·å¤–å‡ºè¡Œ"
                  },
                  {
                    "option": "ç¾å¦†ç©¿æ­"
                  },
                  {
                    "option": "åˆ›ä¸šå‰¯ä¸š"
                  },
                  {
                    "option": "çŸ¥è¯†æŠ€èƒ½"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "æ˜¯å¦ç”Ÿæˆå›¾ç‰‡",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "æ˜¯"
                  },
                  {
                    "option": "å¦"
                  }
                ]
              },
              "requiredField": true
            },
            {
              "fieldLabel": "é…å›¾é£æ ¼",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "è®°äº‹æœ¬é£æ ¼"
                  },
                  {
                    "option": "æ™®é€šé£æ ¼"
                  },
                  {
                    "option": "AIç”Ÿæˆ"
                  }
                ]
              },
              "multiselect": true
            },
            {
              "fieldLabel": "ç”Ÿæˆè§†é¢‘",
              "fieldType": "dropdown",
              "fieldOptions": {
                "values": [
                  {
                    "option": "æ˜¯"
                  },
                  {
                    "option": "å¦"
                  }
                ]
              },
              "requiredField": true
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.2,
      "position": [
        -144,
        448
      ],
      "id": "32152cea-4791-4285-93c2-ec59d33ac71c",
      "name": "On form submission",
      "webhookId": "566a72bd-4b00-48dd-921b-611e06ed7641"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fbe32261-3848-42c1-919e-e789ead34376",
              "leftValue": "={{ $('On form submission').item.json['å†…å®¹æ¥æº'] }}",
              "rightValue": "^(https?:\\/\\/)?([\\w\\-]+\\.)+[\\w\\-]+(\\/[\\w\\-.~:?#\\[\\]@!$&'()*+,;=]*)*$",
              "operator": {
                "type": "string",
                "operation": "regex"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        544,
        448
      ],
      "id": "18c7c037-626b-411b-a335-ea26cfc91617",
      "name": "If"
    },
    {
      "parameters": {
        "url": "={{ $('On form submission').item.json[\"å†…å®¹æ¥æº\"] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        752,
        304
      ],
      "id": "969c5c7c-89dd-45e3-942d-91258dddc28f",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "jsCode": "// è·å–HTMLå†…å®¹\nlet htmlContent = $input.first().json.data || '';\n\nif (!htmlContent) {\n  return [{\n    json: {\n      cleanText: '',\n      originalLength: 0,\n      cleanLength: 0\n    }\n  }];\n}\n\n// å»é™¤scriptå’Œstyleæ ‡ç­¾åŠå…¶å†…å®¹\nhtmlContent = htmlContent.replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '');\nhtmlContent = htmlContent.replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '');\n\n// ä¸ºå—çº§å…ƒç´ æ·»åŠ æ¢è¡Œæ ‡è®°\nconst blockElements = [\n  'div', 'p', 'br', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n  'li', 'ul', 'ol', 'blockquote', 'pre', 'hr', 'table',\n  'tr', 'td', 'th', 'header', 'footer', 'section', 'article',\n  'nav', 'main', 'aside'\n];\n\nblockElements.forEach(tag => {\n  const regex = new RegExp(`<\\\\/?${tag}[^>]*>`, 'gi');\n  htmlContent = htmlContent.replace(regex, '\\n');\n});\n\n// å»é™¤æ‰€æœ‰å‰©ä½™çš„HTMLæ ‡ç­¾\nhtmlContent = htmlContent.replace(/<[^>]*>/g, '');\n\n// è§£ç å¸¸è§çš„HTMLå®ä½“\nconst htmlEntities = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&quot;\": \"\\\"\",\n  \"&#39;\": \"'\",\n  \"&apos;\": \"'\",\n  \"&nbsp;\": \" \",\n  \"&copy;\": \"Â©\",\n  \"&reg;\": \"Â®\",\n  \"&trade;\": \"â„¢\",\n  \"&hellip;\": \"â€¦\",\n  \"&mdash;\": \"â€”\",\n  \"&ndash;\": \"â€“\",\n  \"&lsquo;\": \"'\",\n  \"&rsquo;\": \"'\",\n  \"&ldquo;\": \"\\\"\",\n  \"&rdquo;\": \"\\\"\"\n};\n\nObject.keys(htmlEntities).forEach(entity => {\n  const regex = new RegExp(entity, 'g');\n  htmlContent = htmlContent.replace(regex, htmlEntities[entity]);\n});\n\n// è§£ç æ•°å­—HTMLå®ä½“ï¼ˆå¦‚ &#123;ï¼‰\nhtmlContent = htmlContent.replace(/&#(\\d+);/g, (match, dec) => {\n  return String.fromCharCode(dec);\n});\n\n// è§£ç åå…­è¿›åˆ¶HTMLå®ä½“ï¼ˆå¦‚ &#x7B;ï¼‰\nhtmlContent = htmlContent.replace(/&#x([0-9A-Fa-f]+);/g, (match, hex) => {\n  return String.fromCharCode(parseInt(hex, 16));\n});\n\n// æ¸…ç†å’Œæ ¼å¼åŒ–æ–‡æœ¬\nhtmlContent = htmlContent\n  .replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n')  // ä¸‰ä¸ªæˆ–æ›´å¤šè¿ç»­æ¢è¡Œåˆå¹¶ä¸ºä¸¤ä¸ª\n  .replace(/[ \\t]+/g, ' ')            // å¤šä¸ªè¿ç»­ç©ºæ ¼/åˆ¶è¡¨ç¬¦åˆå¹¶ä¸ºä¸€ä¸ªç©ºæ ¼\n  .replace(/^\\s+|\\s+$/g, '')          // å»é™¤é¦–å°¾ç©ºç™½\n  .replace(/\\n /g, '\\n')              // å»é™¤è¡Œé¦–ç©ºæ ¼\n  .replace(/ \\n/g, '\\n')              // å»é™¤è¡Œå°¾ç©ºæ ¼\n  .replace(/\\n{3,}/g, '\\n\\n');        // ç¡®ä¿æœ€å¤šåªæœ‰ä¸¤ä¸ªè¿ç»­æ¢è¡Œ\n\n// è¿”å›å¤„ç†ç»“æœ\nreturn [{\n  json: {\n    cleanText: htmlContent,\n    originalLength: ($input.first().json.data || '').length,\n    cleanLength: htmlContent.length,\n    wordCount: htmlContent.trim() ? htmlContent.trim().split(/\\s+/).length : 0\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        928,
        304
      ],
      "id": "cd74065f-158c-476d-b8fc-6e5cc1465c0a",
      "name": "Code"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=æ–‡æ¡ˆå†…å®¹ï¼š{{ $json.cleanText }}",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€ä½èµ„æ·±å°çº¢ä¹¦å†…å®¹åˆ›ä½œä¸“å®¶ï¼Œæ“…é•¿å°†æ–‡ç« å†…å®¹è½¬åŒ–ä¸ºå¸å¼•çœ¼çƒä¸”å…·æœ‰é«˜äº’åŠ¨ç‡çš„å°çº¢ä¹¦é£æ ¼æ–‡æ¡ˆã€‚è¯·æ ¹æ®æä¾›çš„å†…å®¹ï¼Œåˆ›ä½œä¸€ç¯‡ç¬¦åˆä»¥ä¸‹è¦æ±‚çš„å°çº¢ä¹¦æ–‡æ¡ˆï¼š\n\n## é£æ ¼è¦æ±‚ï¼š\n1. å¼€å¤´ä½¿ç”¨1-2ä¸ªå¸å¼•çœ¼çƒçš„emojiå’Œç®€æ´æœ‰åŠ›çš„æ ‡é¢˜ï¼Œå¿«é€ŸæŠ“ä½è¯»è€…æ³¨æ„åŠ›ã€‚\n2. è¯­è¨€å¹´è½»åŒ–ã€äº²åˆ‡è‡ªç„¶ï¼Œç¬¦åˆå°çº¢ä¹¦ç”¨æˆ·çš„è¡¨è¾¾ä¹ æƒ¯ï¼Œå¸¦æœ‰è½»æ¾å¹½é»˜æ„Ÿã€‚\n3. é€‚å½“æ’å…¥emojiè¡¨æƒ…ï¼Œå¢å¼ºè¶£å‘³æ€§å’Œè§†è§‰æ•ˆæœï¼Œä½†ä¸è¿‡åº¦å †ç Œã€‚\n4. åˆ†æ®µæ¸…æ™°ï¼Œæ¯ä¸ªæ®µè½çªå‡ºé‡ç‚¹ï¼Œä¾¿äºé˜…è¯»å’Œç†è§£ã€‚\n5. ç»“å°¾éƒ¨åˆ†æ˜ç¡®å¼•å¯¼ç”¨æˆ·è¿›è¡Œç‚¹èµã€æ”¶è—å’Œè¯„è®ºï¼Œæå‡äº’åŠ¨ç‡ã€‚\n\n## å‚è€ƒçš„ç»“æ„/æ¨¡æ¿ï¼š\n{{ $('Code4').item.json.styleContent }}\n\n## é•¿åº¦æ§åˆ¶ï¼š\n- æ€»å­—æ•°æ§åˆ¶åœ¨200-300å­—ä¹‹é—´ï¼Œå†…å®¹ç²¾ç‚¼ä¸”ä¿¡æ¯å®Œæ•´ï¼Œé¿å…å†—ä½™ã€‚\n\n## é¢å¤–è¦æ±‚ï¼š\n1. ä¸ºæ–‡æ¡ˆç”Ÿæˆä¸€æ®µé…å›¾æè¿°ï¼Œä¾¿äºé€šè¿‡AIå·¥å…·åˆ›ä½œé£æ ¼ç»Ÿä¸€ä¸”å¥‘åˆä¸»é¢˜çš„å›¾ç‰‡ã€‚\n2. ä»æ–‡æ¡ˆä¸­æç‚¼1-2å¥å…³é”®å¥å­æˆ–äº®ç‚¹ï¼Œä½œä¸ºå›¾ç‰‡ä¸Šçš„æ–‡æ¡ˆï¼Œå¯æŒ‰å°çº¢ä¹¦é£æ ¼å¤šæ·»åŠ æ¢è¡Œç¬¦å¢å¼ºå¯è¯»æ€§ï¼Œæ¯æ®µæ–‡æ¡ˆä¸è¶…è¿‡5ä¸ªæ±‰å­—ï¼ˆå¦‚ï¼šä¸€ä¸ªæ–°äºº\\nåšç”µå•†\\nåˆ°åº•åº”è¯¥\\nå¦‚ä½•èµ·æ­¥ï¼Ÿï¼‰\n3. æ ¹æ®æ–‡æ¡ˆä¸»é¢˜æå–3-5ä¸ªè‹±æ–‡æ ¸å¿ƒå…³é”®è¯ï¼Œç”¨äºåœ¨ç´ æç½‘ç«™æˆ–å›¾åº“ä¸­ç²¾å‡†æœç´¢ç›¸å…³å›¾ç‰‡ç´ æã€‚\n\nè¯·ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°è¦æ±‚è¾“å‡ºå†…å®¹ï¼Œç¡®ä¿æ–‡æ¡ˆæ—¢ç¬¦åˆå°çº¢ä¹¦é£æ ¼ï¼Œåˆå…·å¤‡é«˜å¸å¼•åŠ›å’Œäº’åŠ¨æ€§ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        1104,
        304
      ],
      "id": "8f2c0178-6646-4c20-9fd0-8af40ee26062",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        960,
        480
      ],
      "id": "52db2d6b-e0a2-46c3-b13b-4f166700aa3b",
      "name": "DeepSeek Chat Model1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1120,
        480
      ],
      "id": "bf1834f9-ff85-49d0-8f56-07123c20dcdc",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\"Xhs_Copywriter\": \"å°çº¢ä¹¦æ–‡æ¡ˆå†…å®¹\",\n\"Pic_Description\":\"é…å›¾æè¿°\",\n\"Pic_Keywords\":\"å›¾ç‰‡å…³é”®è¯\",\n\"Pic_Sentences\":\"å›¾ç‰‡å…³é”®å¥å­\"\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1248,
        480
      ],
      "id": "d3bf3629-aff4-4db5-b351-8fd40ecfabd0",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "8078d6a3-c79a-4bd3-9229-f86d22314aa9",
              "leftValue": "={{ $('On form submission').item.json[\"æ˜¯å¦ç”Ÿæˆå›¾ç‰‡\"] }}",
              "rightValue": "æ˜¯",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2416,
        416
      ],
      "id": "caad5715-d106-401c-8d52-d8fc001b3e02",
      "name": "If1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5f62450b-99eb-40d2-b859-1a5d2fa24de1",
              "name": "fold",
              "value": "={{ $json.output.Pic_Sentences.replace(/[\\n\\r]+/g, ',').replace(/[\"'\\\\/:*?<>|]/g, '') }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1568,
        448
      ],
      "id": "01faf930-dfa6-4a47-9d22-fa026bc3157d",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.style }}",
                    "rightValue": "=è®°äº‹æœ¬é£æ ¼",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e9cfde61-b5e3-4690-9bae-ced47a42291f"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "dde474f7-41ea-486c-8ae2-25f5b720d04b",
                    "leftValue": "={{ $json.style }}",
                    "rightValue": "æ™®é€šé£æ ¼",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "4c152838-2dd7-4ee0-bd46-2f18b439be4b",
                    "leftValue": "={{ $json.style }}",
                    "rightValue": "AIç”Ÿæˆ",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        544,
        880
      ],
      "id": "8a74cd41-4c34-4746-bfa6-7ada1592b522",
      "name": "Switch"
    },
    {
      "parameters": {
        "fieldToSplitOut": "style",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        192,
        896
      ],
      "id": "6e2fa482-e107-4085-9163-7664b0321db3",
      "name": "Split Out"
    },
    {
      "parameters": {
        "jsCode": "// è·å–æ–‡æœ¬æ•°æ®\nconst inputData = $('AI Agent').item.json.output.Pic_Sentences;\n\n// è·å–æœ€å¤§å€¼æ•°æ®\nconst maxValue = $('Edit Fields1').first().json.bignum;\n\n// å¤„ç†æ–‡æœ¬æ‹†åˆ†ï¼ˆtitleå›ºå®š2è¡Œï¼Œinfoä¸ºå‰©ä½™å†…å®¹ï¼‰\nconst segments = inputData.split('\\n').filter(item => item.trim() !== '');\n\n// å›ºå®šè§„åˆ™ï¼štitleå–å‰2è¡Œï¼Œinfoå–å‰©ä½™è¡Œ\nconst titleLines = 2;\nconst titleParts = segments.slice(0, titleLines);\nconst infoParts = segments.slice(titleLines);\n\n// å¤„ç†è¾¹ç•Œæƒ…å†µ\nconst title = titleParts.join('\\n');\nconst info = infoParts.length > 0 ? infoParts.join('\\n') : '';\n\n// ç”Ÿæˆéšæœºæ•°\nconst randomNumber = Math.floor(Math.random() * maxValue) + 1;\n\n// è¿”å›åˆå¹¶åçš„ç»“æœ\nreturn [\n  {\n    json: {\n      // æ–‡æœ¬æ‹†åˆ†ç»“æœ\n      title: title,\n      info: info,\n      original: inputData,\n      segments_count: segments.length,\n      title_segments: titleParts.length,\n      \n      // éšæœºæ•°ç»“æœ\n      randomNumber: randomNumber,\n      maxValue: maxValue\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        832,
        720
      ],
      "id": "f6b2a7e2-545f-42eb-8ca1-04cb507c7153",
      "name": "Code1"
    },
    {
      "parameters": {
        "fileSelector": "=./n8ndata/picbg/{{ $json.randomNumber }}.jpg",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1104,
        720
      ],
      "id": "911700e1-5bed-432e-bdb6-9f4f90452e2d",
      "name": "Read/Write Files from Disk"
    },
    {
      "parameters": {
        "operation": "multiStep",
        "operations": {
          "operations": [
            {
              "operation": "text",
              "text": "={{ $('Code1').item.json.title }}",
              "fontSize": 180,
              "positionX": 200,
              "positionY": 400,
              "lineLength": 10,
              "font": "/usr/share/fonts/truetype/host/A_HYPixel11pxU-2.ttf"
            },
            {
              "operation": "text",
              "text": "={{ $('Code1').item.json.info }}\n",
              "fontSize": 150,
              "positionX": 200,
              "positionY": 900,
              "lineLength": 10,
              "font": "/usr/share/fonts/truetype/host/A_HYPixel11pxU-2.ttf"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        1392,
        720
      ],
      "id": "f7c10921-458a-44eb-b991-da61c3f28522",
      "name": "Edit Image"
    },
    {
      "parameters": {
        "command": "=mkdir -p ./n8ndata/{{ $('Edit Fields').item.json.fold }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        1776,
        448
      ],
      "id": "cf6ef948-af21-4f1f-b8b8-2b623514305d",
      "name": "Execute Command"
    },
    {
      "parameters": {
        "jsCode": "const jsonData1 = $('AI Agent').first().json.output.Xhs_Copywriter;\n\nconst jsonData2 = $('AI Agent').first().json.output.Pic_Description;\n\n// å°†ä¸¤ä¸ªJSONå¯¹è±¡è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„æ–‡æœ¬\nconst fileContent = JSON.stringify(jsonData1, null, 2) + '\\n\\n' + JSON.stringify(jsonData2, null, 2);\n\n// å°†æ–‡æœ¬å†…å®¹è½¬æ¢ä¸ºbase64\nconst base64Content = Buffer.from(fileContent, 'utf8').toString('base64');\n\n// åˆ›å»ºæ–‡ä»¶åï¼ˆå¯ä»¥æ·»åŠ æ—¶é—´æˆ³ï¼‰\n\nconst fileName = `å°çº¢ä¹¦æ–‡æ¡ˆ.txt`;\n\n// è¿”å›åŒ…å«base64ç¼–ç æ•°æ®çš„ç»“æœ\nreturn [\n  {\n    json: {\n      fileName: fileName,\n      fileContent: fileContent,\n      base64Data: base64Content,\n      fileSize: fileContent.length\n    },\n    binary: {\n      data: {\n        data: base64Content,\n        mimeType: 'text/plain',\n        fileName: fileName,\n        fileExtension: 'txt'\n      }\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1984,
        448
      ],
      "id": "9bd389e4-5804-470d-aff4-2c3eb10dab2e",
      "name": "Code2"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=./n8ndata/{{ $('Edit Fields').item.json.fold }}/{{ $json.fileName }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2192,
        448
      ],
      "id": "f0cf1b55-d965-41f8-9e27-7d79214aa950",
      "name": "Read/Write Files from Disk2"
    },
    {
      "parameters": {
        "url": "https://api.pexels.com/v1/search",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "={{ $json.randomKeyword }}"
            },
            {
              "name": "per_page",
              "value": "3"
            },
            {
              "name": "orientation",
              "value": "portrait"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "t50IrKlRkoghVjM8qjB4b9BN00RN8cVTMLAIpGDsjx0ELf1yeOZxaqUs"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1024,
        896
      ],
      "id": "8fc43832-e54a-4def-aeac-8ac055dd6fef",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "jsCode": "// è·å–å…³é”®è¯å­—ç¬¦ä¸²\nconst keywords = $('AI Agent').item.json.output.Pic_Keywords;\n\n// è·å–æ–‡æœ¬æ•°æ®\nconst inputData = $('AI Agent').item.json.output.Pic_Sentences;\n\n// å¤„ç†å…³é”®è¯\nconst keywordArray = keywords.split(',').map(keyword => keyword.trim());\nconst randomKeyword = keywordArray[Math.floor(Math.random() * keywordArray.length)];\n\n// å¤„ç†æ–‡æœ¬æ‹†åˆ†ï¼ˆtitleå›ºå®š2è¡Œï¼Œinfoä¸ºå‰©ä½™å†…å®¹ï¼‰\nconst segments = inputData.split('\\n').filter(item => item.trim() !== '');\nconst titleLines = 2;\nconst titleParts = segments.slice(0, titleLines);\nconst infoParts = segments.slice(titleLines);\nconst title = titleParts.join('\\n');\nconst info = infoParts.length > 0 ? infoParts.join('\\n') : '';\n\n// è¿”å›n8næ ¼å¼çš„ç»“æœ\nreturn [\n  {\n    json: {\n      // å…³é”®è¯å¤„ç†ç»“æœ\n      randomKeyword: randomKeyword,\n      allKeywords: keywordArray,\n      totalCount: keywordArray.length,\n      \n      // æ–‡æœ¬æ‹†åˆ†ç»“æœ\n      title: title,\n      info: info,\n      original: inputData,\n      segments_count: segments.length\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        832,
        896
      ],
      "id": "45fe8c45-d53b-49fd-9b82-e39169ee2244",
      "name": "Code3"
    },
    {
      "parameters": {
        "url": "={{ $json.photos[0].src.original }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1216,
        896
      ],
      "id": "e8d3427d-cc56-450e-abc6-0e05aca5f60d",
      "name": "HTTP Request2"
    },
    {
      "parameters": {
        "operation": "multiStep",
        "operations": {
          "operations": [
            {
              "operation": "resize",
              "width": 1242,
              "height": 1656
            },
            {
              "operation": "blur",
              "blur": 35,
              "sigma": 10
            },
            {
              "operation": "text",
              "text": "={{ $('Code3').item.json.title }}",
              "fontSize": 180,
              "fontColor": "#FFE609",
              "positionX": 200,
              "positionY": 350,
              "lineLength": 10,
              "font": "/usr/share/fonts/truetype/host/AiDianZiTi-2.ttf"
            },
            {
              "operation": "text",
              "text": "={{ $('Code3').item.json.info }}",
              "fontSize": 150,
              "fontColor": "#FFE609",
              "positionX": 200,
              "positionY": 800,
              "lineLength": 10,
              "font": "/usr/share/fonts/truetype/host/AiDianZiTi-2.ttf"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.editImage",
      "typeVersion": 1,
      "position": [
        1392,
        896
      ],
      "id": "1502e619-ac72-43ca-a322-c0d97d78f225",
      "name": "Edit Image2"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=./n8ndata/{{ $('Edit Fields').item.json.fold }}/{{ $('Switch').item.json.style }}.jpg",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1888,
        896
      ],
      "id": "5630cc1a-0b01-455c-a63c-2177e188dc20",
      "name": "Read/Write Files from Disk3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "  https://api.replicate.com/v1/models/google/imagen-4/predictions",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer replicateå¹³å°çš„apikey"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Prefer",
              "value": "wait"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"input\": {\n      \"prompt\": \"{{ $('AI Agent').item.json.output.Pic_Description }}\",\n      \"aspect_ratio\": \"9:16\",\n      \"output_format\": \"jpg\",\n      \"safety_filter_level\": \"block_medium_and_above\"\n    }\n  }",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        832,
        1088
      ],
      "id": "e311b736-ea25-48e3-953e-6afdcfdaad06",
      "name": "ç”Ÿæˆå›¾ç‰‡"
    },
    {
      "parameters": {
        "url": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1392,
        1088
      ],
      "id": "e6604c92-50fc-4731-953d-9e5972225af9",
      "name": "HTTP Request3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=http://host.docker.internal:8080/api/v1/videos",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"video_subject\": \"{{ $('On form submission').item.json[\"å†…å®¹æ¥æº\"] }}\",\n    \"video_script\": \"{{ $json.formatted_text }}\",\n    \"video_terms\": \"{{ $('AI Agent').item.json.output.Pic_Keywords }}\",\n    \"video_aspect\": \"9:16\",\n    \"video_concat_mode\": \"sequential\",\n    \"video_transition_mode\": \"None\",\n    \"video_clip_duration\": 4,\n    \"video_count\": 1,\n    \"video_source\": \"pexels\",\n    \"video_materials\":null,\n    \"video_language\": \"\",\n    \"voice_name\": \"siliconflow:FunAudioLLM/CosyVoice2-0.5B:benjamin-Male\",\n    \"voice_volume\": 1.0,\n    \"voice_rate\": 1.2,\n    \"bgm_type\": \"random\",\n    \"bgm_file\": \"\",\n    \"bgm_volume\": 0.2,\n    \"subtitle_enabled\": true,\n    \"subtitle_position\": \"bottom\",\n    \"custom_position\": 70.0,\n    \"font_name\": \"MicrosoftYaHeiBold.ttc\",\n    \"text_fore_color\": \"#FFFFFF\",\n    \"text_background_color\": true,\n    \"font_size\": 60,\n    \"stroke_color\": \"#000000\",\n    \"stroke_width\": 1.5,\n    \"n_threads\": 2,\n    \"paragraph_number\": 1\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        160,
        1392
      ],
      "id": "68702e92-4309-4a51-846d-53f6880695bb",
      "name": "ç”Ÿæˆè§†é¢‘"
    },
    {
      "parameters": {
        "amount": 10
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        432,
        1392
      ],
      "id": "31e3446b-8462-4842-a341-4544f3bde81d",
      "name": "Wait",
      "webhookId": "cf24f397-124d-4732-a139-4a59e0380c1e"
    },
    {
      "parameters": {
        "url": "=http://host.docker.internal:8080/api/v1/tasks/{{ $json.data.task_id }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        720,
        1392
      ],
      "id": "b307ce6c-1058-484d-a4b6-91a3ff8ba06c",
      "name": "æŸ¥è¯¢è§†é¢‘"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=./n8ndata/{{ $('Edit Fields').item.json.fold }}/video.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        1456,
        1392
      ],
      "id": "7916e37d-8fa5-42e7-becd-3dc5560f5808",
      "name": "å†™å…¥ç£ç›˜3"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f5d66584-990a-4d75-ae70-22e521de4e91",
              "leftValue": "={{ $json.data.progress }}",
              "rightValue": 100,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        992,
        1392
      ],
      "id": "7107875f-d519-4a92-9874-40b52527b5b5",
      "name": "If2"
    },
    {
      "parameters": {
        "url": "={{ $json.data.videos[0] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1232,
        1392
      ],
      "id": "f3002ced-ef81-4ce4-9cc2-fbd24153dceb",
      "name": "HTTP Request4"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "7647db4c-8e31-4172-af28-5be236adaf70",
              "leftValue": "={{ $('On form submission').item.json[\"ç”Ÿæˆè§†é¢‘\"] }}",
              "rightValue": "æ˜¯",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2416,
        544
      ],
      "id": "57be48d6-e773-4a0e-b624-a1dce1d6f5b5",
      "name": "If3"
    },
    {
      "parameters": {
        "jsCode": "// è·å–è¾“å…¥æ–‡æœ¬\nconst inputText = $('AI Agent').first().json.output.Xhs_Copywriter;\n\n// æ ¼å¼åŒ–æ–‡æœ¬å‡½æ•° - åå‘æ“ä½œï¼Œåªä¿ç•™éœ€è¦çš„å­—ç¬¦\nfunction formatText(text) {\n  let cleanedText = text;\n  \n  // 1. åªä¿ç•™ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ã€å¸¸ç”¨æ ‡ç‚¹ç¬¦å·å’Œç©ºæ ¼\n  // è¿™æ ·å¯ä»¥æœ‰æ•ˆå»é™¤æ‰€æœ‰emojiï¼ˆåŒ…æ‹¬å¤åˆemojiï¼‰\n  cleanedText = cleanedText.replace(/[^\\u4e00-\\u9fff\\u3400-\\u4dbf\\u3000-\\u303f\\uff00-\\uffefa-zA-Z0-9\\s.,!?;:()ï¼ˆï¼‰ï¼ï¼Ÿï¼›ï¼šã€ã€‚ï¼Œ]/g, '');\n  \n  // 2. å»é™¤æ¢è¡Œç¬¦ï¼Œæ›¿æ¢ä¸ºç©ºæ ¼\n  cleanedText = cleanedText.replace(/\\n+/g, ' ');\n  \n  // 3. å»é™¤tagæ ‡ç­¾ï¼ˆ#å¼€å¤´çš„è¯æ±‡ï¼‰\n  cleanedText = cleanedText.replace(/#[^\\s#]+/g, '');\n  \n  // 4. å»é™¤å•åŒå¼•å·\n  cleanedText = cleanedText.replace(/['\"]/g, '');\n  \n  // 5. æ¸…ç†å¤šä½™ç©ºæ ¼å¹¶ä¿®å‰ªé¦–å°¾ç©ºæ ¼\n  cleanedText = cleanedText.replace(/\\s+/g, ' ').trim();\n  \n  return cleanedText;\n}\n\n// å¤„ç†æ–‡æœ¬\nconst formattedText = formatText(inputText);\n\n// è¿”å›n8næ ¼å¼çš„ç»“æœ\nreturn [\n  {\n    json: {\n      formatted_text: formattedText,\n      character_count: formattedText.length\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -128,
        1392
      ],
      "id": "e544e0c3-a640-4ece-b284-ab51b5b8eb8b",
      "name": "Code5"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "629e2561-51c1-44c0-a210-e3ae3165d495",
              "name": "style",
              "value": "={{ $('On form submission').item.json[\"é…å›¾é£æ ¼\"] }}",
              "type": "array"
            },
            {
              "id": "16685d75-2b18-43f5-b9a3-9a61fce72e57",
              "name": "bignum",
              "value": 8,
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -128,
        896
      ],
      "id": "fbb9b629-2ea7-42b4-8327-a76faeea3d5a",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "content": "\n## å°çº¢ä¹¦å›¾ç‰‡ç´ æç”Ÿæˆ\n- æ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼Œç”Ÿæˆç›¸åº”é£æ ¼çš„å›¾ç‰‡ï¼Œå¹¶ä¸”ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶",
        "height": 608,
        "width": 2784,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        672
      ],
      "typeVersion": 1,
      "id": "f6a18f58-aa3c-4c16-89cb-4f65f587edd2",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "\n## å°çº¢ä¹¦è§†é¢‘ç´ æç”Ÿæˆ\n- æ ¹æ®ç”¨æˆ·é€‰æ‹©ï¼Œç”ŸæˆçŸ­è§†é¢‘ï¼Œä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹",
        "height": 400,
        "width": 2784,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        1312
      ],
      "typeVersion": 1,
      "id": "200368ef-e515-4a73-b5ad-0b50e29d6b37",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "837b43a9-ca86-43fe-ab7c-a5ca50f99f26",
              "name": "é€šç”¨é£æ ¼",
              "value": "ã€å¼€å¤´ã€‘ï¼šç”¨1-2ä¸ªemoji + å¸å¼•äººçš„æ ‡é¢˜ï¼Œè¥é€ æ°›å›´ã€‚\nã€æ­£æ–‡ã€‘ï¼šåŒ…å«3-4ä¸ªè¦ç‚¹ï¼Œæ¯ä¸ªè¦ç‚¹å‰åŠ emojiç¬¦å·ï¼Œæ¡ç†æ¸…æ™°ï¼Œä¿¡æ¯ä¸°å¯Œã€‚\nã€æ€»ç»“ã€‘ï¼šç”¨ç®€æ´æœ‰åŠ›çš„è¯­è¨€æ€»ç»“æ ¸å¿ƒè§‚ç‚¹ï¼Œå¢å¼ºå°è±¡ã€‚\nã€äº’åŠ¨ã€‘ï¼šè®¾è®¡è´´åˆå†…å®¹çš„äº’åŠ¨å¼•å¯¼è¯­ï¼Œé¼“åŠ±ç”¨æˆ·ç‚¹èµã€æ”¶è—å’Œè¯„è®ºã€‚\nã€æ ‡ç­¾ã€‘ï¼šæ·»åŠ 3-5ä¸ªä¸å†…å®¹é«˜åº¦ç›¸å…³çš„è¯é¢˜æ ‡ç­¾ï¼Œæ–¹ä¾¿å†…å®¹ä¼ æ’­ã€‚",
              "type": "string"
            },
            {
              "id": "44a8f2c3-1979-490b-835e-ddd061a6190a",
              "name": "å¥³æ€§æˆé•¿",
              "value": "â¤ï¸ è‡ªæˆ‘å…³çˆ±æ—¥è®° ã…¤ \nã…¤\nâ¤ï¸ \nâ‘  å¥åº·ä¹ æƒ¯ï¼šè¿åŠ¨ã€é¥®é£Ÿ \nâ‘¡ ç²¾ç¥æŠ¤ç†ï¼šæ”¾æ¾èº«å¿ƒ å•ç‹¬\nâ‘¢ è¶£å‘³çˆ±å¥½ï¼šé‡Šæ”¾å‹åŠ› ã…¤ \nã…¤\nğŸ“ æ„Ÿæ‚Ÿåˆ†äº« \nğŸŒ¼ \"è‡ªå·±æ˜¯è‡ªå·±ç”Ÿå‘½ä¸­æœ€é‡è¦çš„äºº\" \nğŸŒŸ \"çˆ±è‡ªå·±æ‰èƒ½æ›´å¥½åœ°çˆ±åˆ«äºº\" ã…¤ \nã…¤\nğŸŒ¸ è®°å½•æ¯å¤©çš„è‡ªæˆ‘æˆé•¿ï¼Œå› ä¸ºä½ å€¼å¾—ï¼",
              "type": "string"
            },
            {
              "id": "90d69235-3178-42cc-9416-4afd987ed579",
              "name": "ç¾é£Ÿæ¢åº—",
              "value": "åˆ†äº«è¿™å®¶è¶…çº§æœ‰æ°›å›´æ„Ÿçš„å°é…’é¦†ï¼Œæ™šä¸Šå’Œä¸‰äº”å¥½å‹åœ¨è¿™é‡Œç›¸èšå–é…’çœŸçš„å¾ˆä¸æˆ³ï¼\nã…¤\nâ€‹â¤µï¸â—¦â€‹\nâœ”ï¸ \nâœ”ï¸ \nâœ” \nã…¤\n\nåœ°å€åœ¨è¿™é‡Œï¼Œå»xxçš„æ—¶å€™ä¸€å®šè®°å¾—æ‰“å¡\nğŸ“ xx\n",
              "type": "string"
            },
            {
              "id": "3f58cf28-2d6d-43ac-9b68-60a8d0ab2b24",
              "name": "æ¯å©´",
              "value": "ğ– šá\nã…¤\nåˆ†äº«è¿‘æœŸçˆ±ç”¨çš„å®å®ğŸ‘¶å¥½ç‰©\nã…¤\nè¶…çº§å®ç”¨ä¸é—²ç½®ï¼Œä¸€äººå¸¦å¨ƒä¹Ÿçœå¿ƒ\nğŸŸ¡ è¾…é£Ÿé”…\nxxx\nã…¤\nğŸŸ¡ å¤‡ç”¨å¥¶å˜´\nxxx\nã…¤\nğŸŸ¡ å¥¶å˜´åˆ·\nxxx\nã…¤\nğŸŸ¡ æŠ½å±‰å®‰å…¨é”\nxxx\nã…¤\nçˆ¸çˆ¸å¦ˆå¦ˆå¿«å»å†²é¸­â—",
              "type": "string"
            },
            {
              "id": "7b9337fc-d69b-4978-b0ef-8da8b8742ae4",
              "name": "å¥½ç‰©æ¨è",
              "value": "åˆ†äº«æˆ‘çš„å¥½ç‰©æ¸…å•ï¼ï¼\næŠŠå®¶æ‰“é€ æˆè‡ªå·±å–œæ¬¢çš„æ ·å­âœŒ\nã…¤\n//á´³á´¼á´¼á´° á´°á´¬áµ\nã…¤\nğŸ§ŠNO.1\nğŸ‰NO.2\nğŸ§ŠNO.3\nğŸ‰NO.4\nğŸ§ŠNO.5\nğŸ‰NO.6\nã…¤\n//á´³á´¼á´¼á´° á´°á´¬áµ\nã…¤\n#è´­ç‰©åˆ†äº«[è¯é¢˜]# #å¥½ç‰©åˆ†äº«[è¯é¢˜]# ",
              "type": "string"
            },
            {
              "id": "34ef2a09-c162-4eaf-875a-d047d87260e7",
              "name": "å®¶å±…",
              "value": "æŠŠè¿™å¥—å¥¶æ²¹LOFTé‡Œçš„æ‰€æœ‰é¥°å“åˆ†äº«ç»™å¤§å®¶â•\nã…¤\nğŸ§¾æ¸…å•å¦‚ä¸‹\nâ€ \nâ \nâ‚ \nâƒ \nâ„ \nâ… \nâ† \nâ‡ \nâˆ \nâ€â“ª \nâ€â€ \nâ€â \nã…¤\nğŸªï¼šğ–£ğ–ºğ—‚ğ—…ğ—’ ğ—…ğ—‚ğ–¿ğ–¾ ï½¥â—¡ï½¥\nè¿™äº›å°å°åˆç²¾è‡´çš„å°æ‘†ä»¶ä¸€ä¸‹å°±è®©ç©ºé—´æ´»æ³¼èµ·æ¥å•¦\nã…¤\n#è£…ä¿®[è¯é¢˜]# #å¥½ç‰©åˆ†äº«[è¯é¢˜]# ",
              "type": "string"
            },
            {
              "id": "59a56a8d-7f3a-43d4-abc0-a77577ab20c8",
              "name": "æˆ·å¤–å‡ºè¡Œ",
              "value": "â›ºéœ²è¥å­£æ¥äº†ï¼\nã…¤\nğŸ“‹ä¿å§†çº§æ¸…å•ï¼š\n1âƒ£ï¸ \n2âƒ£ï¸ \n3âƒ£ï¸ \n4âƒ£ï¸ \n5âƒ£ï¸ \n6âƒ£ï¸ \n7âƒ£ï¸ \n8âƒ£ï¸ \n9âƒ£ï¸ \nã…¤\nâ™¡ >> â˜ªï¸ ä»Šæ—¥ä»½ç¾ä¸½è¥ä¸šç”¨åˆ°çš„æ°›å›´æ„Ÿå¥½ç‰©â™¬\nã…¤\nâšªï¸ \nâšªï¸ \nâšªï¸ \nã…¤\n#å°çº¢ä¹¦éœ²è¥å­£[è¯é¢˜]# #ä¸€èµ·å»éœ²è¥[è¯é¢˜]# ",
              "type": "string"
            },
            {
              "id": "23deecf4-168e-4b7d-b6e7-a6125cfcb70f",
              "name": "ç¾å¦†ç©¿æ­",
              "value": "âœ¨è¶…ç®€å•æ–°æ‰‹å¦†å®¹âœ¨\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ­ï¼š\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ®ï¼š\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ¯ï¼š\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ°ï¼š\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ±ï¼š\nã…¤\nğŸ’«ğ—§ğ—œğ—£ ğŸ²ï¼š\nã…¤\n#ä»Šæ—¥å¦†å®¹[è¯é¢˜]# #ç¾å¦†[è¯é¢˜]# #å¦†å®¹æ•™å­¦[è¯é¢˜]# ",
              "type": "string"
            },
            {
              "id": "67fcb934-c5dd-44a8-bec1-b2b53b9c53de",
              "name": "åˆ›ä¸šå‰¯ä¸š",
              "value": "ğŸˆèŠ±äº†5å¤©æ—¶é—´ï¼Œæ•´åˆ13ä¸ªå¸¦è´§è´¦å·æ¡ˆä¾‹\nã…¤\nğŸˆä¸ºå¤§å®¶æ€»ç»“ä¸€äº›å®ç”¨åŸåˆ™\n1âƒ£ï¸ \n2âƒ£ï¸ \n3âƒ£ï¸ \n4âƒ£ï¸ \nã…¤\nğŸˆä¸¾å‡ ä¸ªä¾‹å­\nA. \n>>æ”¹æˆï¼š\nB.\n>>æ”¹æˆï¼š\nã…¤\nå®æˆ˜TIPSï¼š\nğŸ’¡\nğŸ’¡\nğŸ’¡\nğŸ’¡\nã…¤\n#è‡ªåª’ä½“è¿è¥[è¯é¢˜]# #å¸¦è´§[è¯é¢˜]# #åˆ›ä¸š[è¯é¢˜]# ",
              "type": "string"
            },
            {
              "id": "0b70635d-f76f-4875-ab91-b038dd03acec",
              "name": "çŸ¥è¯†æŠ€èƒ½",
              "value": "æ··èŒåœºä¸€å®šè¦å­¦å¥½çš„officeè¿›é˜¶æŠ€èƒ½ï¼Œè®©é¢†å¯¼çœ‹è§ä½ çš„é—ªå…‰ç‚¹ï¼Œå’»å’»å’»åœ°å‡èŒåŠ è–ªğŸš€ğŸš€\nã…¤\nè¯·æ”¶è—è¿™ä»½å­¦ä¹ è·¯å¾„æŒ‡å—ï¼š\n1ï¸âƒ£ \n2ï¸âƒ£ \n3ï¸âƒ£ \n4ï¸âƒ£ \n5ï¸âƒ£ \n6ï¸âƒ£ \n7ï¸âƒ£ \nã…¤\n",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        64,
        448
      ],
      "id": "95fa4f21-38a4-4ad4-bd32-eaf33b3a1f72",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "jsCode": "// è·å–ç”¨æˆ·é€‰æ‹©çš„é£æ ¼\nconst selectedStyle = $('On form submission').first().json[\"æ–‡æ¡ˆé£æ ¼\"];\n\n// è·å–æ‰€æœ‰é£æ ¼æ•°æ®\nconst allStylesData = $input.all();\n\nlet styleContent = null;\n\n// éå†æ‰€æœ‰è¾“å…¥æ•°æ®ï¼ŒæŸ¥æ‰¾åŒ¹é…çš„é£æ ¼\nfor (const item of allStylesData) {\n  // æ£€æŸ¥item.jsonä¸­æ˜¯å¦åŒ…å«æ‰€é€‰é£æ ¼\n  if (item.json && item.json[selectedStyle]) {\n    styleContent = item.json[selectedStyle];\n    break;\n  }\n  \n  // å¦‚æœç›´æ¥åœ¨itemä¸­æŸ¥æ‰¾ï¼ˆå¤‡ç”¨åŒ¹é…æ–¹å¼ï¼‰\n  if (item[selectedStyle]) {\n    styleContent = item[selectedStyle];\n    break;\n  }\n}\n\n// è¿”å›åŒ¹é…ç»“æœ\nreturn [{\n  json: {\n    selectedStyle: selectedStyle,\n    styleContent: styleContent,\n    found: styleContent !== null\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        304,
        448
      ],
      "id": "9f5952a9-2288-47d3-84ad-8d68d5c3aa3e",
      "name": "Code4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7f724f2f-0c6c-45ab-9786-7dbeee37081a",
              "name": "cleanText",
              "value": "={{ $('On form submission').item.json[\"å†…å®¹æ¥æº\"] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        752,
        464
      ],
      "id": "cb8c8b7c-74be-402e-9715-a4dc23479566",
      "name": "Edit Fields3"
    }
  ],
  "pinData": {
    "On form submission": [
      {
        "json": {
          "å†…å®¹æ¥æº": "https://www.qbitai.com/2025/07/314155.html",
          "æ–‡æ¡ˆé£æ ¼": "çŸ¥è¯†æŠ€èƒ½",
          "æ˜¯å¦ç”Ÿæˆå›¾ç‰‡": "æ˜¯",
          "é…å›¾é£æ ¼": [
            "è®°äº‹æœ¬é£æ ¼",
            "æ™®é€šé£æ ¼",
            "AIç”Ÿæˆ"
          ],
          "ç”Ÿæˆè§†é¢‘": "æ˜¯",
          "submittedAt": "2025-07-28T14:46:10.447+08:00",
          "formMode": "test"
        }
      }
    ]
  },
  "connections": {
    "On form submission": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DeepSeek Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç”Ÿæˆå›¾ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk": {
      "main": [
        [
          {
            "node": "Edit Image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "Code2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code2": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read/Write Files from Disk2": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          },
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code3": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Edit Image2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Image2": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå›¾ç‰‡": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request3": {
      "main": [
        [
          {
            "node": "Read/Write Files from Disk3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆè§†é¢‘": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "æŸ¥è¯¢è§†é¢‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŸ¥è¯¢è§†é¢‘": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "HTTP Request4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request4": {
      "main": [
        [
          {
            "node": "å†™å…¥ç£ç›˜3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "Code5",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Code5": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆè§†é¢‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Code4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code4": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "b4f65f06-9f20-447b-8d19-27e6f583be07",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "667f8e49cea6f05a4f2d4764a2ef083b44c681d7bcf3709cc71f85be90eeca2e"
  },
  "id": "wWrXT6DdPayijjek",
  "tags": []
}